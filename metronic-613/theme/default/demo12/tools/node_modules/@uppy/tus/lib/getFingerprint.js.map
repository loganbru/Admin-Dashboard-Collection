{"version":3,"sources":["getFingerprint.js"],"names":["tus","require","isCordova","window","PhoneGap","Cordova","cordova","isReactNative","navigator","product","toLowerCase","module","exports","getFingerprint","uppyFileObj","file","options","defaultOptions","fingerprint","uppyFingerprint","id","endpoint","join","Promise","resolve"],"mappings":"AAAA,IAAMA,GAAG,GAAGC,OAAO,CAAC,eAAD,CAAnB;;AAEA,SAASC,SAAT,GAAsB;AACpB,SAAO,OAAOC,MAAP,KAAkB,WAAlB,KACL,OAAOA,MAAM,CAACC,QAAd,KAA2B,WAA3B,IACA,OAAOD,MAAM,CAACE,OAAd,KAA0B,WAD1B,IAEA,OAAOF,MAAM,CAACG,OAAd,KAA0B,WAHrB,CAAP;AAKD;;AAED,SAASC,aAAT,GAA0B;AACxB,SAAO,OAAOC,SAAP,KAAqB,WAArB,IACL,OAAOA,SAAS,CAACC,OAAjB,KAA6B,QADxB,IAELD,SAAS,CAACC,OAAV,CAAkBC,WAAlB,OAAoC,aAFtC;AAGD,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAC,MAAM,CAACC,OAAP,GAAiB,SAASC,cAAT,CAAyBC,WAAzB,EAAsC;AACrD,SAAO,UAAUC,IAAV,EAAgBC,OAAhB,EAAyB;AAC9B,QAAId,SAAS,MAAMK,aAAa,EAAhC,EAAoC;AAClC,aAAOP,GAAG,CAACiB,cAAJ,CAAmBC,WAAnB,CAA+BH,IAA/B,EAAqCC,OAArC,CAAP;AACD;;AAED,QAAMG,eAAe,GAAG,CACtB,KADsB,EAEtBL,WAAW,CAACM,EAFU,EAGtBJ,OAAO,CAACK,QAHc,EAItBC,IAJsB,CAIjB,GAJiB,CAAxB;AAMA,WAAOC,OAAO,CAACC,OAAR,CAAgBL,eAAhB,CAAP;AACD,GAZD;AAaD,CAdD","sourcesContent":["const tus = require('tus-js-client')\n\nfunction isCordova () {\n  return typeof window !== 'undefined' && (\n    typeof window.PhoneGap !== 'undefined' ||\n    typeof window.Cordova !== 'undefined' ||\n    typeof window.cordova !== 'undefined'\n  )\n}\n\nfunction isReactNative () {\n  return typeof navigator !== 'undefined' &&\n    typeof navigator.product === 'string' &&\n    navigator.product.toLowerCase() === 'reactnative'\n}\n\n// We override tus fingerprint to uppy’s `file.id`, since the `file.id`\n// now also includes `relativePath` for files added from folders.\n// This means you can add 2 identical files, if one is in folder a,\n// the other in folder b — `a/file.jpg` and `b/file.jpg`, when added\n// together with a folder, will be treated as 2 separate files.\n//\n// For React Native and Cordova, we let tus-js-client’s default\n// fingerprint handling take charge.\nmodule.exports = function getFingerprint (uppyFileObj) {\n  return function (file, options) {\n    if (isCordova() || isReactNative()) {\n      return tus.defaultOptions.fingerprint(file, options)\n    }\n\n    const uppyFingerprint = [\n      'tus',\n      uppyFileObj.id,\n      options.endpoint\n    ].join('-')\n\n    return Promise.resolve(uppyFingerprint)\n  }\n}\n"]}